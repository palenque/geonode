{% extends "apps/app_base.html" %}
{% load i18n %}
{% load staticfiles %}

{% block title %} {% trans "Explore Apps" %} - {{ block.super }} {% endblock %}

{% block body_class %}apps{% endblock %}

{% block body %}

  <div class="col-md-12">
    {% if request.user.profile == 'developer' %}
    <a href="{% url "document_upload" %}" class="btn btn-primary pull-right">{% trans "Create App" %}</a>
    {% endif %}
    <h2 class="page-title">{% trans "Explore Apps" %}</h2>
  </div>

  {% with custom_filters='apps/_app_filter.html' %}
  {% with custom_sort_filter='apps/_app_sort_filter.html' %}
  {% with custom_snippet='apps/_app_list_item.html' %}
  {% include "search/_search_content.html" %}
  {% endwith %}
  {% endwith %}
  {% endwith %}

{% comment %}
  <div class="col-md-8 filter">      
    <ul class="nav nav-pills filter" id="sort">
      <li><a data-value="" data-filter="member" class="selected" ng-click="single_choice_listener($event)">{% trans "All" %}</a></li>
      <li><a data-value="{{ request.user }}" data-filter="member" ng-click="single_choice_listener($event)">{% trans "My apps" %}</a></li>
    </ul>
  </div>
  <div class="col-md-12">
    <div class="row" id="contain-slider">
      <div class="col-md-3">
        <div class="selections">
          <h5>
            {% trans "Filters" %}
            <a href="." id="clear-search" class="pull-right">{% trans "Clear all filters" %}</a>
          </h5>
        </div>
        {% include 'apps/_app_filter.html' %}
      </div>
      
      <div class="col-md-9">
        {% include 'search/_pagination.html' %}
        {% include "apps/_app_list_item.html" %}
      </div>
    </div>
  </div>

{% endcomment %}

{% comment %}
  <div class="col-md-12">
    {% if request.user.profile == 'developer' %}
    <a href="{% url "app_create" %}" class="btn btn-primary pull-right">{% trans "Create App" %}</a>
    {% endif %}
    <h2 class="page-title">{% trans "Explore Apps" %}</h2>
  </div>

  <div class="col-md-8 filter">

  
    <ul class="nav nav-pills filter" id="sort">
      <li><a data-value="" data-filter="member" class="selected" ng-click="single_choice_listener($event)">{% trans "All" %}</a></li>
      <li><a data-value="{{ request.user }}" data-filter="member" ng-click="single_choice_listener($event)">{% trans "My apps" %}</a></li>
    </ul>
  </div>
  <div class="col-md-12">
    <div class="col-md-8" id="contain-slider">
      <div class="tab-content" id="search-content">
      {% include "apps/_app_list_item.html" %}
      </div>
      {% include 'search/_pagination.html' %}      
    </div>
  </div>
{% endcomment %}

{% endblock %}

{% block extra_script %}
  <script type="text/javascript">
  SEARCH_URL = '{% url 'api_dispatch_list' api_name='api' resource_name='apps' %}'
  </script>
  {% with include_spatial='false' %}
  {% include 'search/search_scripts.html' %}
  {% endwith %}
{% endblock extra_script %}
